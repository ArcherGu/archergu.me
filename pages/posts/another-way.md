---
title: 🍃 不上茶屋 开发过程中的思路转换
date: 2022-03-4T08:00:00.000+00:00
tags: ['CSS', 'Canvas', '经验分享']
tagsColor: ['#1198cf', '#d85235', '#268785']
duration: 15min
---

<blockquote>
将一个小玩具做两遍，会有一些不同的收获。
</blockquote>

## 背景
<code>[🍃 不上茶屋](https://teahouse.archergu.me/)</code> 是我在2022年情人节 / 元宵节前夕给我老婆制作的一个小玩具。这个玩意的主要功能就是模仿市面上的茶饮点单应用，用户通过自己选择茶底，配料的方式来组合自己的茶饮，当然，它不会真正的为你下单购买茶饮，仅仅是最后组成一个茶饮的模型并产生一张图片用于分享。

制作这个玩具的动机是因为我们的二宝即将出生，而我老婆平时有喝奶茶/果茶的习惯，显然，怀孕期间是不建议孕妇饮用这些茶饮的，所以我想通过这个小玩具来满足一下老婆长久空虚的味蕾 (😂大脑皮层)，顺便也想帮助现在的都市白领们减少这些茶饮 (奶茶/果茶/咖啡/苏打水...) 的摄入，毕竟这些商业茶饮都不是太健康，长期饮用肯定对身体不好嘛。

实际上，这个玩具我制作了两次，第一次是通过 CSS 来设计茶饮模型的，第二次则是通过 Canvas 来绘制茶饮模型。这几天老婆临近生产，我们提前住院待产，趁着宝宝还没出生，医院里又没有什么事情，我想通过这篇 blog 来分享下这个玩具设计制作两次的原因。

## 另类茶饮应用
<code>🍃 不上茶屋</code> 虽然是一个模仿茶饮点单的应用，但是它又有些不同，模仿仅仅是 UI 的布局部分，应用的头部是茶饮店铺的一些基本信息，主要是店铺的名称和 logo，而我又添了一个<code>外送/自取</code>的 Switch 来切换一句俏皮的话语，也用来说明这个茶饮应用并不会真正的让你喝到这杯茶。主体部分的左侧是一个茶底选择的 Tab，用于切换不同的茶底。右侧则与常规茶饮应用的产品列表不同，由于这是一个游戏性质的玩具，所以我在这里放置的是本文的重点——茶饮模型。

具体的操作流程是这样的，用户进入后，可以通过茶底 Tab 选择不同的茶底，茶饮模型的液体会随之切换，为了效果生动一些，茶杯中的液体是有流动效果的 (液体顶部有波浪流动动画)，不同的茶底除了颜色透明度的区别，也会有一些符合茶底的细节上的区别，比如红茶/绿茶会有不同的茶叶漂浮在液体中，苏打水则会有气泡上浮的动画。用户选择完茶底后就可以进入 DIY 环节。

DIY 环节中，左侧的茶底 Tab 会收缩隐藏起来，取而代之的是几样我们常见的茶饮配料，比如珍珠椰果之类的。用户可以选择或者去除这些配料，来打造自己喜欢的茶饮。当然，这些配料也会在茶底液体中体现出来，还是为了生动的效果，这些配料或多或少都有一些小动画。

完成配料选择后，来到最后的享用环节，当然，这是一个小玩具，不会为你真正的下单茶饮哦，所以就自己脑补下吧 (不上茶屋，即不去茶饮店铺，戒奶茶专用～)，这个环节其实主要是生成一张茶饮模型的图片用于下载分享，毕竟茶喝晒朋友圈也是姑娘们常做的事情嘛。用户可以在此环节选择一个适合的背景颜色，让图片更加漂亮。

![share](/images/teahouse.jpeg "teahouse-share")

整个小玩具的大致流程差不多就是这样，你可以把它当作一个茶饮制作模拟器来玩，它的核心部分就是茶饮模型，毕竟你的大部分操作都是体现在它上面。

接下来我想写一下这个小玩具我制作两次的原因，不过在此之前我需要先介绍下用到的一些技术栈。首先是开发构建工具，依然快到心动的 <vscode-icons-file-type-vite /> [Vite.js](https://vitejs.dev/) 。然后是前端框架，依然是我们熟悉的 <vscode-icons-file-type-vue /> [Vue.js](https://v3.vuejs.org/)。一些其他的插件工具则可以看一下项目的 <code>[源码](https://github.com/ArcherGu/archers-teahouse)</code>，这里就不过多介绍了。

## 第一版的问题

第一次设计的时候，我采用了 CSS 来制作这个茶饮模型，毕竟通过上面的流程描述，你也应该能大概 get 到这是一个比较简单的东西，无非是画出一杯茶，加一些配料，然后加上少许的动画，以目前 CSS 的能力来说这些都比较容易实现的。

首先是最外面的容器，杯子。一个矩形，高一点，窄一点，具体的宽高可以通过 vue3 最新的
